@using Project_B.Code.Entity.Interface
@model List<Project_B.Models.CompetitionItemBetModel>

@foreach (var bySportTypes in Model.GroupBy(c => c.SportType)) {
    <H2>@bySportTypes.Key.ToString()</H2>
    foreach (var groupedCompetitions in bySportTypes.GroupBy(c => c.Competition.ID)) {
        <H3>@groupedCompetitions.First().Competition.Name</H3>
        <table class="table">
            @foreach (var competition in groupedCompetitions) {
                <tr>
                    <td class="col-md-1 text-right">@competition.DateUtc.ToString("dd.MM.yyyy")<br />@competition.DateUtc.ToString("HH:mm")</td>
                    <td class="col-md-2">
                        <a>@competition.Competitor1.Name</a>
                        <br />
                        <a>@competition.Competitor2.Name</a>
                    </td>
                    @foreach (var oddType in BetHelper.SportTypeWithOdds[competition.SportType]) {
                        var currentBet = competition.CurrentBets[oddType];
                        var maxBet = competition.HistoryMaxBets[oddType];
                        var minBet = competition.HistoryMinBets[oddType];
                        <td>
                            <small title="@maxBet.DateTimeUtc.ToString("dd.MM.yyyy HH:00")">@maxBet.Odd</small>
                            <div title="@currentBet.DateTimeUtc.ToString("dd.MM.yyyy HH:00")"><b>@currentBet.Odd</b></div>
                            <small title="@minBet.DateTimeUtc.ToString("dd.MM.yyyy HH:00")">@minBet.Odd</small>
                        </td>
                    }
                </tr>
            }
        </table>
    }
}